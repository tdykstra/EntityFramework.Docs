---
title: EF Core tools reference (.NET CLI) - EF Core
author: bricelam
ms.author: bricelam
ms.date: 09/20/2018
uid: core/miscellaneous/cli/dotnet
---

# Entity Framework Core tools reference - .NET CLI

The command-line interface (CLI) tools for Entity Framework Core perform design-time development tasks. For example, they create migrations, apply migrations, and scaffold a model based on an existing database. The commands are an extension to the cross-platform [dotnet](/dotnet/core/tools) command, which is part of the [.NET Core SDK](https://www.microsoft.com/net/core). These tools work with .NET Core projects.

If you're using Visual Studio, we recommend the [Package Manager Console tools](powershell.md) instead:
* They automatically work with the current project selected in the **Package Manager Console** without requiring that you manually switch directories.
* They automatically open files generated by a command after the command is completed.

## Installing the tools

The installation procedure depends on project type and version:

* ASP.NET Core version 2.1 and later
* EF Core 2.x
* EF Core 1.x

### For ASP.NET Core 2.1+

* Install the current [.NET Core SDK](https://www.microsoft.com/net/download/core). The SDK has to be installed even if you have the latest version of Visual Studio 2017.

  This is all that is needed for ASP.NET Core 2.1+ because the `Microsoft.EntityFrameworkCore.Design` package is included in the [Microsoft.AspNetCore.App metapackage](/aspnet/core/fundamentals/metapackage-app).

### For apps that use EF Core 2.x

* Install the current [.NET Core SDK](https://www.microsoft.com/net/download/core). The SDK has to be installed even if you have the latest version of Visual Studio 2017.

* Install the latest stable `Microsoft.EntityFrameworkCore.Design` package. 

  ``` Console	
  dotnet add package Microsoft.EntityFrameworkCore.Design	
  ```

### For apps that use EF Core 1.x

* Install the .NET Core SDK version 2.1.200. Later versions are not compatible with CLI tools for EF Core 1.0 and 1.1.

* Configure the application to use the 2.1.200 SDK version by modifying its [global.json](https://docs.microsoft.com/en-us/dotnet/core/tools/global-json) file. This file is normally included in the solution directory (one above the project). 

* Edit the project file and add `Microsoft.EntityFrameworkCore.Tools.DotNet` as a `DotNetCliToolReference` item. Specify the latest 1.x version, for example: 1.1.6. See the project file example at the end of this section.

* Install the latest 1.x version of the `Microsoft.EntityFrameworkCore.Design` package, for example:

  ```console
  dotnet add package Microsoft.EntityFrameworkCore.Design -v 1.1.6
  ```

  With both package references added, the project file looks something like this:

  ``` xml
  <Project Sdk="Microsoft.NET.Sdk">
    <PropertyGroup>
      <OutputType>Exe</OutputType>
      <TargetFramework>netcoreapp1.1</TargetFramework>
    </PropertyGroup>
    <ItemGroup>
      <PackageReference Include="Microsoft.EntityFrameworkCore.Design"
                        Version="1.1.6"
                         PrivateAssets="All" />
    </ItemGroup>
    <ItemGroup>
       <DotNetCliToolReference Include="Microsoft.EntityFrameworkCore.Tools.DotNet"
                              Version="1.1.6" />
    </ItemGroup>
  </Project>
  ```

  A package reference with `PrivateAssets="All"` isn't exposed to projects that reference this project. This restriction is especially useful for packages that are typically only used during development.

### Verify installation

Run the following commands to verify that EF Core CLI tools are correctly installed:

  ``` Console
  dotnet restore
  dotnet ef
  ```

The output from the command identifies the version of the tools in use:

```console

                     _/\__
               ---==/    \\
         ___  ___   |.    \|\
        | __|| __|  |  )   \\\
        | _| | _|   \_/ |  //|\\
        |___||_|       /   \\\/\\

Entity Framework Core .NET Command-line Tools 2.1.3-rtm-32065

<Usage documentation follows, not shown.>
```

## Using the tools

Before using the tools:
* Understand the difference between target and startup project.
* Be aware of special requirements for .NET Standard class libraries.
* For ASP.NET Core projects, set the environment.

### Target and startup project

The commands refer to *target project* and *startup project*:

* The target project is where the EF context and entity classes reside. It's also where any files are added or removed by the commands. The target project defaults to the project in the current directory but can be changed by using the <nobr>`--project`</nobr> option.

* The startup project is the one that the tools build and run. It defaults to the project in the current directory but can be changed by using the <nobr>`--startup-project`</nobr> option.

One project may be both target project and startup project. A typical scenario where they are separate projects is the following:

* EF Core context and entity classes are in a class library.
* A console app or web app references the class library.

In this scenario, if the command prompt runs in the class library project folder, you would specify the startup project as in the following example:

```console
dotnet ef --startup-project ../MyConsoleApplication/ migrations list
```

### .NET Standard class libraries

The CLI tools work only with .NET Core projects. For target frameworks other than .NET Core (for example, Universal Windows Platform or Xamarin), you have to use EF Core in a .NET Standard class library. In that case, you have to create a startup project that targets .NET Core so that the tooling has a concrete target platform into which it can load your class library. This startup project can be a dummy project with no real code &mdash; it is only needed to provide a target for the tooling.

For projects that target .NET Core, you don't have to use a .NET Standard class library. In that case, it will be easier to work with the EF Core tools if you use a .NET Core class library.

### ASP.NET Core environment

To specify the environment for ASP.NET Core projects, set the **ASPNETCORE_ENVIRONMENT** environment variable before running commands.

## Common options

|    |  Option                                | Description                            |
|:---|:---------------------------------|:----------------------------|
|    | `--json`                           | Show JSON output.           |
| <nobr>`-c`</nobr> | `--context <DBCONTEXT>`           | The `DbContext` class to use. Class name only or fully qualified with namespaces.  If this option is omitted, EF Core will find the context class. If there are multiple context classes, this option is required. |
| `-p` | `--project <PROJECT>`             | Relative path to the project folder of the target project.  Default value is the current folder.|
| `-s` | `--startup-project <PROJECT>`     | Relative path to the project folder of the startup project. Default value is the current folder.|
|    | `--framework <FRAMEWORK>`         | The [Target Framework Moniker](/dotnet/standard/frameworks#supported-target-framework-versions) for the [target framework](/dotnet/standard/frameworks).  Use when the project file specifies multiple target frameworks, and you want to select one of them.|
|    | `--configuration <CONFIGURATION>` | The build configuration, for example: `Debug` or `Release`. |
|    | `--runtime <IDENTIFIER>`          | The identifier of the target runtime to restore packages for. For a list of Runtime Identifiers (RIDs), see the [RID catalog](/dotnet/core/rid-catalog).         |
| `-h` | `--help`                           | Show help information.      |
| `-v` | `--verbose`                        | Show verbose output.        |
|    | `--no-color`                       | Don't colorize output.      |
|    | `--prefix-output`                  | Prefix output with level.   |

## dotnet ef database drop

Drops the database.

Options:

|| Option |Description |
|:---|:----------|:---------------------------------------------------------|
| <nobr>`-f`</nobr> | <nobr>`--force`</nobr>   | Don't confirm.                                           |
|    | <nobr>`--dry-run`</nobr> | Show which database would be dropped, but don't drop it. |

## dotnet ef database update

Updates the database to the last migration or to a specified migration.

Arguments:

| Argument |Description |
|:-------------|:---------------------------------------------------------------------------------------------|
| `<MIGRATION>` | The target migration. Migrations may be identified by name or by ID. The number 0 is a special case that means *before the first migration* and causes all migrations to be reverted. If no migration is specified, the command defaults to the last migration. |

The following examples update the database to a specified migration. The first uses the migration name and the second uses the migration ID:

```console
dotnet ef database update InitialCreate
dotnet ef database update 20180904195021_InitialCreate
```

### dotnet ef dbcontext info

Gets information about a `DbContext` type.

### dotnet ef dbcontext list

Lists available `DbContext` types.

### dotnet ef dbcontext scaffold

Scaffolds a `DbContext` and entity types for a database.

Arguments:

| Argument |Description |
|:--------------|:----------------------------------------------------------------------------|
| `<CONNECTION>` | The connection string to the database. For ASP.NET Core 2.x projects, the value can be *name=\<name of connection string>*. In that case the name comes from the configuration sources that are set up for the project. |
| `<PROVIDER>`   | The provider to use. Typically this is the name of the NuGet package, for example: `Microsoft.EntityFrameworkCore.SqlServer`. |

Options:

|| Option |Description |
|:----------------|:----------------------------------------|:-------------------------------------------------------------------------------------------------|
| <nobr>-d</nobr> | `--data-annotations`                      | Use attributes to configure the model (where possible). If this option is omitted, only the fluent API is used. |
| `-c`              | `--context <NAME>`                       | The name of the `DbContext` class to generate.                                                                       |
|                 | `--context-dir <PATH>`                   | The directory to put the `DbContext` class file in. Paths are relative to the project directory. Namespaces are derived from the folder names.             |
| `-f`              | `--force`                                 | Overwrite existing files.                                                                        |
| `-o`              | `--output-dir <PATH>`                    | The directory to put entity class files in. Paths are relative to the project directory.                      |
|                 | <nobr>`--schema <SCHEMA_NAME>...`</nobr> | The schemas of tables to generate entity types for. To specify multiple schemas, repeat `--schema` for each one. If this option is omitted, all schemas are included. |
| `-t`              | `--table <TABLE_NAME>`...                | The tables to generate entity types for. To specify multiple tables, repeat `-t` or `--table` for each one. If this option is omitted, all tables are included.                                                         |
|                 | `--use-database-names`                    | Use table and column names exactly as they appear in the database. If this option is omitted, database names are changed to more closely conform to C# name style conventions. |

The following example scaffolds all schemas and tables and puts the new files in the *Models* folder.

```console
dotnet ef dbcontext scaffold "Server=(localdb)\mssqllocaldb;Database=Blogging;Trusted_Connection=True;" Microsoft.EntityFrameworkCore.SqlServer -o Models
```

The following example scaffolds only selected tables and creates the context in a separate folder with a specified name:

```console
dotnet ef dbcontext scaffold "Server=(localdb)\mssqllocaldb;Database=Blogging;Trusted_Connection=True;" Microsoft.EntityFrameworkCore.SqlServer -o Models -t Blog -t Post --context-dir Context -c BlogContext
```

### dotnet ef migrations add

Adds a new migration.

Arguments:

| Argument |Description |
|:--------|:---------------------------|
| `<NAME>` | The name of the migration. |

Options:

|| Option |Description |
|:----------------|:----------------------------------|:-----------------------------------------------------------------------------------------------------------------|
| <nobr>`-o`</nobr> | <nobr>`--output-dir <PATH>`</nobr> | The directory (and sub-namespace) to use. Paths are relative to the project directory. Defaults to "Migrations". |

### dotnet ef migrations list

Lists available migrations.

### dotnet ef migrations remove

Removes the last migration.

Options:

|| Option |Description |
|:---|:--------|:----------------------------------------------------------------------|
| <nobr>`-f`</nobr> | `--force` | Revert the migration even if it has been applied to the database. |

### dotnet ef migrations script

Generates a SQL script from migrations.

Arguments:

| Argument |Description |
|:--------|:--------------------------------------------------------------|
| `<FROM>` | The starting migration. Migrations may be identified by name or by ID. The number 0 is a special case that means *before the first migration*. Defaults to 0. |
| `<TO>`   | The ending migration. Defaults to the last migration.         |

Options:

|| Option |Description |
|:---|:-----------------|:-------------------------------------------------------------------|
| <nobr>`-o`</nobr> | `--output <FILE>` | The file to write the script to.                                   |
| `-i` | `--idempotent`     | Generate a script that can be used on a database at any migration. |

The following example creates a script for the InitialCreate migration:

```console
dotnet ef migrations script 0 InitialCreate
```

The following example creates a script for all migrations after the InitialCreate migration.

```console
dotnet ef migrations script 20180904195021_InitialCreate
```